function topcolor(){const e=document.getElementById("body-wrap");if(e)if(e.classList.contains("post")){const e=document.getElementById("post-cover");if(!e)return;e.getAttribute("src")&&(e.crossOrigin="Anonymous");const o=()=>{try{const o=new ColorThief,t=o.getColor(e),r=(o.getPalette(e,6),`rgb(${t.join(",")})`);console.log("主色调:",r),document.documentElement.style.setProperty("--glmp-color",r)}catch(e){console.error("ColorThief 提取失败，可能是跨域限制或图片未加载完全:",e),setDefaultTheme()}};e.complete&&0!==e.naturalWidth?o():e.addEventListener("load",o,{once:!0})}else setDefaultTheme()}function setDefaultTheme(){const e=document.documentElement;e.style.setProperty("--heo-main-color","rgb(66, 90, 239)"),e.style.setProperty("--heo-backnav-color","#031764,#150136,#67044d"),e.style.setProperty("--glmp-color","var(--heo-theme)"),e.style.setProperty("--heo-main-op","var(--heo-theme-op)"),e.style.setProperty("--heo-main-op-deep","var(--heo-theme-op-deep)")}topcolor();